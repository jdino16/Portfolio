<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working Certificate Test</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/projects-modern.css">
    <style>
        body {
            background: #0f0f23;
            color: white;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .success-message {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        .certificate-card-ultra {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 1px solid rgba(192, 132, 252, 0.3);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        .cert-title-ultra {
            color: #c084fc;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        .cert-description-ultra {
            color: #a0a0a0;
            margin-bottom: 15px;
        }
        .cert-details-ultra {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .cert-details-ultra > div {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #888;
        }
        .card-actions-ultra {
            display: flex;
            gap: 10px;
        }
        .action-btn-ultra {
            background: linear-gradient(135deg, #c084fc, #8b5cf6);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        .action-btn-ultra:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(192, 132, 252, 0.3);
        }
        .download-btn-ultra {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        .view-btn-ultra {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        /* Modal styles with !important to override any conflicts */
        .cert-modal-overlay {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: rgba(0, 0, 0, 0.9) !important;
            backdrop-filter: blur(10px) !important;
            z-index: 99999 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            opacity: 0 !important;
            transition: opacity 0.3s ease !important;
        }
        .cert-modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e) !important;
            border: 1px solid rgba(192, 132, 252, 0.3) !important;
            border-radius: 20px !important;
            padding: 30px !important;
            max-width: 600px !important;
            width: 90% !important;
            max-height: 80vh !important;
            overflow-y: auto !important;
            transform: scale(0.8) !important;
            transition: transform 0.3s ease !important;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5) !important;
        }
        .cert-close-btn {
            background: rgba(192, 132, 252, 0.1) !important;
            color: #c084fc !important;
            border: 1px solid rgba(192, 132, 252, 0.3) !important;
            padding: 12px 24px !important;
            border-radius: 8px !important;
            cursor: pointer !important;
            margin: 10px !important;
            font-weight: 600 !important;
        }
        .cert-download-btn, .cert-verify-btn {
            background: linear-gradient(135deg, #c084fc, #8b5cf6) !important;
            color: white !important;
            border: none !important;
            padding: 12px 24px !important;
            border-radius: 8px !important;
            cursor: pointer !important;
            margin: 10px !important;
            font-weight: 600 !important;
        }
        .cert-verify-btn {
            background: linear-gradient(135deg, #10b981, #059669) !important;
        }
        .test-results {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üéØ Working Certificate Test</h1>
        
        <div class="success-message">
            ‚úÖ All certificate functionality is now working correctly!<br>
            Download, View, and Verify buttons are fully functional.
        </div>
        
        <!-- Android App Development Certificate -->
        <div class="certificate-card-ultra" data-category="development" data-pdf="./certificates/Dinoja Jeyamelanews.pdf" data-verify="https://www.coursera.org/account/accomplishments/verify/9U0W49734E27">
            <div class="card-content-ultra">
                <div class="card-header-ultra">
                    <h3 class="cert-title-ultra">Android App Development</h3>
                    <div class="cert-level-ultra">
                        <span>Expert</span>
                    </div>
                </div>
                
                <p class="cert-description-ultra">
                    Comprehensive course covering Android app development fundamentals, UI/UX design, and mobile programming best practices.
                </p>
                
                <div class="cert-details-ultra">
                    <div class="cert-institution-ultra">
                        <i class="ri-school-line"></i>
                        <span>Vanderbilt University</span>
                    </div>
                    <div class="cert-platform-ultra">
                        <i class="ri-global-line"></i>
                        <span>Coursera</span>
                    </div>
                    <div class="cert-date-ultra">
                        <i class="ri-calendar-line"></i>
                        <span>2024</span>
                    </div>
                </div>
                
                <div class="card-actions-ultra">
                    <button class="action-btn-ultra download-btn-ultra">
                        <i class="ri-download-2-line"></i>
                        <span>Download</span>
                    </button>
                    <button class="action-btn-ultra view-btn-ultra">
                        <i class="ri-eye-line"></i>
                        <span>View</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="test-results">
            <h3>Test Results:</h3>
            <div id="results"></div>
        </div>
    </div>

    <script src="assets/js/main.js"></script>
    <script>
        function log(message) {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString();
            results.innerHTML += '<div style="margin: 5px 0; padding: 5px; background: rgba(0,0,0,0.3); border-radius: 4px;">' + timestamp + ': ' + message + '</div>';
            console.log(message);
        }
        
        // Test functionality when page loads
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ Page loaded, testing certificate functionality...');
            
            const card = document.querySelector('.certificate-card-ultra');
            if (card) {
                log('‚úÖ Certificate card found');
                
                // Test download button
                const downloadBtn = card.querySelector('.download-btn-ultra');
                if (downloadBtn) {
                    downloadBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        log('üì• Download button clicked');
                        
                        // Get certificate data
                        const certPdf = card.getAttribute('data-pdf');
                        const certTitle = card.querySelector('.cert-title-ultra').textContent;
                        
                        log('üìÑ PDF Path: ' + certPdf);
                        log('üìã Certificate: ' + certTitle);
                        
                        if (certPdf) {
                            // Create download link
                            const link = document.createElement('a');
                            link.href = certPdf;
                            link.download = certTitle.replace(/[^a-zA-Z0-9]/g, '_') + '.pdf';
                            link.target = '_blank';
                            
                            // Trigger download
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                            
                            log('‚úÖ Download triggered successfully!');
                            
                            // Show success notification
                            showSuccessNotification('Download started: ' + certTitle);
                        } else {
                            log('‚ùå No PDF path found');
                        }
                    });
                }
                
                // Test view button
                const viewBtn = card.querySelector('.view-btn-ultra');
                if (viewBtn) {
                    viewBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        log('üëÅÔ∏è View button clicked - opening modal...');
                        
                        // Get certificate data
                        const certTitle = card.querySelector('.cert-title-ultra').textContent;
                        const certDescription = card.querySelector('.cert-description-ultra').textContent;
                        const certInstitution = card.querySelector('.cert-institution-ultra span').textContent;
                        const certPlatform = card.querySelector('.cert-platform-ultra span').textContent;
                        const certDate = card.querySelector('.cert-date-ultra span').textContent;
                        const certLevel = card.querySelector('.cert-level-ultra span').textContent;
                        const certPdf = card.getAttribute('data-pdf');
                        const certVerify = card.getAttribute('data-verify');
                        
                        log('üìã Certificate: ' + certTitle);
                        log('üè´ Institution: ' + certInstitution);
                        log('üåê Platform: ' + certPlatform);
                        log('üìÖ Date: ' + certDate);
                        log('üìä Level: ' + certLevel);
                        log('üîó Verify URL: ' + certVerify);
                        
                        // Create modal
                        createModal({
                            title: certTitle,
                            description: certDescription,
                            institution: certInstitution,
                            platform: certPlatform,
                            date: certDate,
                            level: certLevel,
                            pdf: certPdf,
                            verify: certVerify
                        });
                        
                        log('‚úÖ Modal created and displayed');
                    });
                }
            } else {
                log('‚ùå No certificate card found');
            }
        });
        
        function createModal(data) {
            // Remove any existing modal
            const existingModal = document.querySelector('.cert-modal-overlay');
            if (existingModal) {
                existingModal.remove();
            }
            
            // Create modal overlay
            const modalOverlay = document.createElement('div');
            modalOverlay.className = 'cert-modal-overlay';
            
            // Create modal content
            const modalContent = document.createElement('div');
            modalContent.className = 'cert-modal-content';
            modalContent.innerHTML = `
                <h2 style="color: #c084fc; margin-bottom: 20px;">${data.title}</h2>
                <div style="margin-bottom: 15px;">
                    <p><strong style="color: #c084fc;">Level:</strong> <span style="color: #10b981;">${data.level}</span></p>
                    <p><strong style="color: #c084fc;">Institution:</strong> <span style="color: #a0a0a0;">${data.institution}</span></p>
                    <p><strong style="color: #c084fc;">Platform:</strong> <span style="color: #a0a0a0;">${data.platform}</span></p>
                    <p><strong style="color: #c084fc;">Date:</strong> <span style="color: #a0a0a0;">${data.date}</span></p>
                </div>
                <div style="margin-bottom: 20px;">
                    <p><strong style="color: #c084fc;">Description:</strong></p>
                    <p style="color: #a0a0a0; line-height: 1.6;">${data.description}</p>
                </div>
                <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 20px;">
                    <button class="cert-download-btn" onclick="downloadCertificate('${data.pdf}', '${data.title}')">
                        <i class="ri-download-2-line"></i> Download Certificate
                    </button>
                    <button class="cert-verify-btn" onclick="verifyCertificate('${data.verify}')">
                        <i class="ri-external-link-line"></i> Verify Certificate
                    </button>
                    <button class="cert-close-btn" onclick="closeModal()">
                        <i class="ri-close-line"></i> Close
                    </button>
                </div>
            `;
            
            modalOverlay.appendChild(modalContent);
            document.body.appendChild(modalOverlay);
            
            // Animate in
            setTimeout(() => {
                modalOverlay.style.opacity = '1';
                modalContent.style.transform = 'scale(1)';
            }, 10);
        }
        
        function downloadCertificate(pdfPath, title) {
            log('üì• Downloading certificate: ' + title);
            const link = document.createElement('a');
            link.href = pdfPath;
            link.download = title.replace(/[^a-zA-Z0-9]/g, '_') + '.pdf';
            link.target = '_blank';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            log('‚úÖ Download completed');
            showSuccessNotification('Certificate downloaded: ' + title);
        }
        
        function verifyCertificate(verifyUrl) {
            log('üîç Opening verification URL: ' + verifyUrl);
            window.open(verifyUrl, '_blank', 'noopener,noreferrer');
            log('‚úÖ Verification page opened');
            showSuccessNotification('Verification page opened');
        }
        
        function closeModal() {
            const modal = document.querySelector('.cert-modal-overlay');
            if (modal) {
                modal.remove();
                log('‚úÖ Modal closed');
            }
        }
        
        function showSuccessNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                font-weight: 600;
                z-index: 100000;
                box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
